<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Image Convert - Max Barrass</title>
<meta name="description" content="Simple tool to create image DataURI‚Äôs.">


  <meta name="author" content="Max Barrass">
  
  <meta property="article:author" content="Max Barrass">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en">
<meta property="og:site_name" content="Max Barrass">
<meta property="og:title" content="Image Convert">
<meta property="og:url" content="https://maxbarrass.com/tools/image-convert">


  <meta property="og:description" content="Simple tool to create image DataURI‚Äôs.">



  <meta property="og:image" content="https://maxbarrass.com/assets/images/site-logo.png">





  <meta property="article:published_time" content="2016-11-04T07:57:00+00:00">





  

  


<link rel="canonical" href="https://maxbarrass.com/tools/image-convert">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Max Barrass",
      "url": "https://maxbarrass.com/"
    
  }
</script>


  <meta name="google-site-verification" content="UuKsKonXwFAcpjarBr3SIx6p8QGmuP_VHN8uMUfIgBw" />





<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Max Barrass Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


  
    <script src="/assets/scripts/lightbox.js"></script>
  


    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<link rel="apple-touch-icon" sizes="180x180" href="/assets/images/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/images/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/images/icons/favicon-16x16.png">
<link rel="manifest" href="/assets/images/icons/site.webmanifest">
<link rel="mask-icon" href="/assets/images/icons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/assets/images/icons/favicon.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/images/icons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


<style>
    .archive__item-teaser {
        min-height: 238px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgb(222,228,228);
        background: radial-gradient(circle, rgba(222,228,228,1) 0%, rgba(255,179,107,1) 100%);
    }

    /*add tint to images*/
    .page__hero--overlay {
        background-color: rgba(255,179,107,.5);
        background-blend-mode: multiply;
    }
</style>

<!-- end custom head snippets -->

    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-9B95B');</script>
<!-- End Google Tag Manager -->


      <script src="//code.jquery.com/jquery-3.1.0.js"></script>
      <script src="//cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<!--      <script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>-->
<!--      <script src="/assets/tools/plugins/jquery-ui/jquery-ui-1.12.1.custom/jquery-ui.js"></script>-->
<!--      <script src="//code.jquery.com/ui/1.12.1/jquery-ui.js" type="text/javascript"></script>-->
<!--      <script src="/assets/tools/plugins/jquery-ui/jquery-ui-1.10.3.custom.min.js" type="text/javascript"></script>-->

      <link rel="stylesheet" href="/assets/tools/plugins/bootstrap-4.4.1/css/bootstrap-grid.min.css">
      <script src="/assets/tools/plugins/bootstrap-modal/js/bootstrap.js"></script>
      <script src="//stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
      <script src="//cdnjs.cloudflare.com/ajax/libs/bootbox.js/5.4.0/bootbox.js" type="text/javascript"></script>


      <!-- BEGIN PAGE LEVEL STYLES -->
      <link rel="stylesheet" type="text/css" href="/assets/tools/plugins/select2/select2.css"/>
      <link rel="stylesheet" type="text/css" href="/assets/tools/plugins/select2/select2-metronic.css"/>
      <link rel="stylesheet" type="text/css" href="/assets/tools/plugins/jquery-notific8/jquery.notific8.min.css"/>
      <link rel="stylesheet" type="text/css" href="/assets/tools/plugins/bootstrap-switch/css/bootstrap-switch.min.css"/>

<!--      <link href="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/css/bootstrap-editable.css" rel="stylesheet"/>-->
<!--      <script src="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/js/bootstrap-editable.min.js"></script>-->
<!--      <link href="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/jquery-editable/css/jquery-editable.css" rel="stylesheet"/>-->
<!--      <script src="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/jquery-editable/js/jquery-editable-poshytip.js"></script>-->

<!--      <script src="/assets/tools/plugins/bootstrap-editable/bootstrap-popovers.js"></script>-->
<!--      <link rel="stylesheet" type="text/css" href="/assets/tools/plugins/bootstrap-editable/bootstrap-editable/css/bootstrap-editable.css"/>-->
<!--      <script src="/assets/tools/plugins/bootstrap4-editable/js/bootstrap-editable.js"></script>-->
<!--      <link rel="stylesheet" type="text/css" href="/assets/tools/plugins/bootstrap4-editable/css/bootstrap-editable.css"/>-->

      <link rel="stylesheet" href="//cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css"/>
      <link rel="stylesheet" href="//cdn.datatables.net/responsive/1.0.0/css/dataTables.responsive.css"/>
<!--        <script src="//cdn.datatables.net/buttons/1.6.1/js/dataTables.buttons.js"></script>-->
<!--        <script src="//cdn.datatables.net/select/1.3.1/js/dataTables.select.js"></script>-->
<!--        <script src="//editor.datatables.net/extensions/Editor/js/dataTables.editor.min.js"></script>-->
      <!-- END PAGE LEVEL STYLES -->

      <!-- BEGIN CUSTOM CSS -->
      <link href="/assets/tools/css/support.css" rel="stylesheet" type="text/css"/>
      <link href="/assets/tools/plugins/codemirror-4.1/lib/codemirror.css" rel="stylesheet" type="text/css"/>
      <link href="/assets/tools/plugins/codemirror-4.1/theme/the-matrix.css" rel="stylesheet" type="text/css"/>

      <!-- END CUSTOM CSS -->

      <style>
          .page {
              padding-right: 0px !important;
          }

          #main {
              max-width: initial !important;
              margin-left: initial !important;
              margin-right: initial !important;
          }

          .editable {
              border-bottom: dashed 1px #0088cc;
          }
      </style>


      <style>
          .form-group {
              vertical-align: top;
          }
          .btn.green {
              color: white;
              text-shadow: none;
              background-color: #35aa47;
              width: 120px;
              height: 55px;
          }
          .btn.blue {
              color: white;
              text-shadow: none;
              background-color: #4d90fe;
              width: 120px;
              height: 55px;
          }
          .btn.yellow {
              color: black;
              text-shadow: none;
              background-color: yellow;
              width: 120px;
              height: 55px;
          }
          .btn.red {
              color: white;
              text-shadow: none;
              background-color: red;
              width: 120px;
              height: 55px;
          }

          .btn-sm {
              width: auto !important;
              height: auto !important;
          }
      </style>
  </head>

  <body class="layout--tool">
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-9B95B"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-logo" href="/"><img src="/assets/images/site-logo.png" alt="site logo"></a>
        
        <a class="site-title" href="/"><span class="title">Max Barrass</span>
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a target="" href="/">Home</a>
            </li><li class="masthead__menu-item">
              <a target="" href="/tools/">Tools</a>
            </li><li class="masthead__menu-item">
              <a target="" href="/blog/">Blog</a>
            </li><li class="masthead__menu-item">
              <a target="" href="/about/">About</a>
            </li><li class="masthead__menu-item">
              <a target="_blank" href="https://github.com/wildone/maxbarrass.com">GitHub</a>
            </li><li class="masthead__menu-item">
              <a target="" href="/search/">Search</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

<style>
#site-nav .site-title {
  width: 150px;
  line-height: 1em;
  border-left: 4px rgb(4,9,21) solid;
  padding-left: .5em;
  font-style: italic;
  font-weight: lighter;
  text-transform: uppercase;
}
#site-nav .site-title .site-subtitle {
  display: none;
}
</style>
  


    <div class="initial-content">
      



<div id="main" role="main">
    
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/profile/maxbarrass4.jpg" alt="Max Barrass" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Max Barrass</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Me</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      
        <li>
          <a href="http://maxbarrass.com" itemprop="url">
            <i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span>
          </a>
        </li>
      

      
        <li>
          <a href="mailto:me@maxbarrass.com">
            <meta itemprop="email" content="me@maxbarrass.com" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span>
          </a>
        </li>
      

      

      
        <li>
          <a href="https://twitter.com/maxbarrass" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span>
          </a>
        </li>
      

      

      
        <li>
          <a href="https://www.linkedin.com/in/maxbarrass" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span>
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://github.com/wildone" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      




<li>
  Donate
</li>


<li>
  <a href="https://sochain.com/address/BTC/18kns7Jt6pym9tmZ6bzUY1Hw4WZ7XrEPxN" itemprop="sameAs">
    <i class="fab fa-btc" aria-hidden="true"></i> BTC
  </a>
</li>


<li>
  <a href="https://sochain.com/address/DOGE/DGxzGHeurYBV9jdUiHBdCJoqS3y1WFoVQF" itemprop="sameAs">
    <b>√ê</b> Doge
  </a>
</li>


<li>
  <a href="https://sochain.com/address/LTC/Lgdu8pchCVQy3sZqy1caJ6UuUXoVDnoGwk" itemprop="sameAs">
    <b>≈Å</b> LTC
  </a>
</li>


    </ul>
  </div>
</div>

  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <a href="/tools/"><span class="nav__sub-title">Tools</span></a>
        

        
        <ul>
          
            <li><a href="/tools/string-tools">String Tools</a></li>
          
            <li><a href="/tools/script-tools">Script Tools</a></li>
          
            <li><a href="/tools/xml-transform">XML Transform</a></li>
          
            <li><a href="/tools/json-xml">Json and XML Tools</a></li>
          
            <li><a href="/tools/json-path">Json Path</a></li>
          
            <li><a href="/tools/ascii-table">Ascii Table</a></li>
          
            <li><a href="/tools/image-convert" class="active">Image Convert</a></li>
          
            <li><a href="/tools/image-map">Image Map Workbench</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Image Convert">
    <meta itemprop="description" content="Simple tool to create image DataURI‚Äôs.">
    <meta itemprop="datePublished" content="2016-11-04T07:57:00+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Image Convert
</h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          less than 1 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <div class="row">
    <div class="col-md-12">
        <div class="form-group">
            <p>Simple tool to create image DataURI's. Basically convert image to Base64 in the browser using Canvas and SVG. Plus some bonus features. You can use this to convert your images in prep for embedding these into your CSS, HTML or any other useful purpose.</p>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-3">

        <div class="portlet box purple ">
            <div class="portlet-title">
                <div class="caption">
                    <h2><i class="far fa-image"></i> Image Selection</h2>
                </div>
                <div class="tools">
                    <a href="" class="collapse">
                    </a>
                </div>
            </div>
            <div class="portlet-body form">
                <form class="form-horizontal" role="form">
                    <div class="form-body">
                        <div class="form-group">
                            <label class="col-md-4 control-label">Image</label>
                            <div class="col-md-8">
                                <button type="button" class="form-control btn green input-small margin-right-10" onclick="$('#inputImage').click()">Pick File</button>
                                <input type="file" id="inputImage" class="hidden" multiple="multiple">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-4 control-label">Width</label>
                            <div class="col-md-8">
                                <div class="input-group">
                                    <input type="text" class="form-control"  id="txtImageWidth" readonly>
                                    <span class="input-group-addon">px</span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-4 control-label">Height</label>
                            <div class="col-md-8">
                                <div class="input-group">
                                    <input type="text" class="form-control"  id="txtImageHeight" readonly>
                                    <span class="input-group-addon">px</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="portlet box purple ">
            <div class="portlet-title">
                <div class="caption">
                    <h2><i class="fas fa-compress"></i> Image Resize</h2>
                </div>
                <div class="tools">
                    <a href="" class="collapse">
                    </a>
                </div>
            </div>
            <div class="portlet-body form">
                <form onsubmit="return(false)" class="form-horizontal" role="form">
                    <div class="form-body">
                        <div class="form-group">
                            <label class="col-md-4 control-label">maxWidth</label>

                            <div class="col-md-8">
                                <div class="input-group">
                                    <input type="text" class="form-control" id="txtImageCanvasMaxWidth">
                                    <span class="input-group-addon">px</span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-4 control-label">maxHeight</label>
                            <div class="col-md-8">
                                <div class="input-group">
                                    <input type="text" class="form-control" id="txtImageCanvasMaxHeight">
                                    <span class="input-group-addon">px</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions right" style="margin-top: 0px;">
                        <button type="button" class="btn green" id="doProcess">Process</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
</div>
<div class="row">
    <div class="col-md-12">

        <div class="portlet box purple ">
            <div class="portlet-title">
                <div class="caption">
                    <h2><i class="fas fa-icons"></i> Image to CSS Base46 Gallery</h2>
                </div>
                <div class="tools">
                    <a href="" class="collapse">
                    </a>
                </div>
            </div>
            <div class="portlet-body form">
                <form  role="form">
                    <div class="form-body">
                        <div class="form-group">
                            <label>Conversion of original image using different rendering styles to Base64</label>

                            <table>
                                <tr>
                                    <th>Image</th>
                                    <th>Canvas Original</th>
                                    <th>Canvas Resize</th>
                                    <th>SVG Original</th>
                                    <th>SVG Resize</th>
                                </tr>
                                <tr>
                                    <td><img src="" id="previewImage"></td>
                                    <td><canvas id="previewCanvas" ></canvas></td>
                                    <td><img id="previewCanvasResize"></td>
                                    <td><svg id="previewSVG" xmlns="http://www.w3.org/2000/svg" version="1.1"></svg></td>
                                    <td><svg id="previewSVGResize" xmlns="http://www.w3.org/2000/svg" version="1.1"></svg></td>
                                </tr>
                                <tr>
                                    <td><textarea id="txtSourceImage" readonly></textarea><br>Len: <input id="txtSourceImageLength" value="0" readonly></td>
                                    <td><textarea id="txtSourceImageCanvas" readonly></textarea><br>Len: <input id="txtSourceImageCanvasLength" value="0" readonly></td>
                                    <td><textarea id="txtSourceImageCanvasResize" readonly></textarea><br>Len: <input id="txtSourceImageCanvasResizeLength" value="0" readonly></td>
                                    <td><textarea id="txtSourceImageSVG" readonly></textarea><br>Len: <input id="txtSourceImageSVGLength" value="0" readonly></td>
                                    <td><textarea id="txtSourceImageSVGResize" readonly></textarea><br>Len: <input id="txtSourceImageSVGResizeLength" value="0" readonly></td>
                                </tr>
                                <tr>
                                    <td>(original)</td>
                                    <td>(canvas(original))</td>
                                    <td>(canvas resized(original))</td>
                                    <td>(svg(original))</td>
                                    <td>(svg(canvas resized))</td>
                                </tr>
                                <tr>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td><img id="previewSVGEmbed" src="" type="image/svg+xml" width="244px" height="244px"/></td>
                                    <td><img id="previewSVGResizeEmbed" src="" type="image/svg+xml" width="244px" height="244px"/></td>
                                </tr>
                            </table>

                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<div class="row">
    <div class="col-md-12">

        <div class="portlet box purple ">
            <div class="portlet-title">
                <div class="caption">
                    <h2><i class="fab fa-apple"></i> Image to Apple App CSS</h2>
                </div>
                <div class="tools">
                    <a href="" class="collapse">
                    </a>
                </div>
            </div>
            <div class="portlet-body form">
                <form  role="form">
                    <div class="form-body">
                        <div class="form-group">
                            <div class="row">
                                <div class="col-md-12">
                                    <label>Embed these images into your Apple Web App, this will provide icons and images for homescreen...</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3">
                                    <img id="previewImage57" width="57px" height="57px" style="max-width:57px; max-height:57px">
                                </div>
                                <div class="col-md-3">
                                    <img id="previewImage72" width="72px" height="72px" style="max-width:72px; max-height:72px">
                                </div>
                                <div class="col-md-3">
                                    <img id="previewImage114" width="114px" height="114px" style="max-width:114px; max-height:114px">
                                </div>
                                <div class="col-md-3">
                                    <img id="previewImage144" width="144px" height="144px" style="max-width:144px; max-height:144px">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <textarea id="txtSourceImagePrep" class="form-control margin-top-10" rows="12" readonly></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<div class="row">
    <div class="col-md-12">

        <div class="portlet box purple ">
            <div class="portlet-title">
                <div class="caption">
                    <h2><i class="fab fa-css3-alt"></i> Image to CSS</h2>
                </div>
                <div class="tools">
                    <a href="" class="collapse">
                    </a>
                </div>
            </div>
            <div class="portlet-body form">
                <form  role="form">
                    <div class="form-body">
                        <div class="form-group">
                            <label>Embed this image into your CSS, for those fast loading times...</label>
                            <textarea id="imageToCSSOutput" class="form-control" rows="12" readonly></textarea>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


        
      </section>

            <style>
                .page__content_adspace_bottom {
                    height: 200px;
                    display: inline-block;
                    width: 100%;
                }
            </style>
            <section class="page__content_adspace_bottom">
            
<div align="center" style="margin: 1em 0;">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-6707033742178132"
         data-ad-slot="7730324178"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

            </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#convert" class="page__taxonomy-item" rel="tag">convert</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#data-uri" class="page__taxonomy-item" rel="tag">data-uri</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#image" class="page__taxonomy-item" rel="tag">image</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#tools" class="page__taxonomy-item" rel="tag">tools</a>
    
    </span>
  </p>


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2016-11-04T07:57:00+00:00">November 4, 2016</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Image+Convert%20https%3A%2F%2Fmaxbarrass.com%2Ftools%2Fimage-convert" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fmaxbarrass.com%2Ftools%2Fimage-convert" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fmaxbarrass.com%2Ftools%2Fimage-convert" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/tools/ascii-table" class="pagination--pager" title="Ascii Table
">Previous</a>
    
    
      <a href="/tools/image-map" class="pagination--pager" title="Image Map Workbench
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2020/05/21/google-photos-metadata%F0%9F%98%97%F0%9F%98%99%F0%9F%98%9A" rel="permalink">Google Photos Metadata üòóüòôüòö
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          less than 1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">My cousin Anton, in Moscow, and I making a cross-continental photo album. We have started scanning some old photos so that we can preserve the memory of our ...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2020/04/10/downloading-files-from-rss-with-jdownloader-packegizer%F0%9F%92%BB%F0%9F%92%A5%F0%9F%98%8D" rel="permalink">Downloading Files from RSS with Jdownloader Packegizer üíªüí•üòç
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Intro
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2016/11/04/linkmoji%F0%9F%92%AA%F0%9F%98%8E%F0%9F%91%8D" rel="permalink">Linkmoji üí™üòéüëç
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          less than 1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Linkmoji!
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2015/06/01/aem-capability-matrix" rel="permalink">AEM Capability Matrix
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">I always get asked does AEM has any components that come out of the box (OOTB)? What is the list of OOTB component?  Can I use them?
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Max Barrass. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>







    
  <script>
    var disqus_config = function () {
      this.page.url = "https://maxbarrass.com/tools/image-convert";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/tools/image-convert"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://maxbarrass.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  






    <!-- TEMPLATE -->
    <!--<script src="/assets/tools/plugins/jquery-1.11.1.js" type="text/javascript"></script>-->
    <!--<script src="//code.jquery.com/jquery-1.11.3.min.js" type="text/javascript"></script>-->
<!--    <script src="//code.jquery.com/jquery-1.9.1.js" type="text/javascript"></script>-->
<!--    <script src="//code.jquery.com/jquery-3.4.1.js" type="text/javascript"></script>-->
    <!-- IMPORTANT! Load jquery-ui-1.10.3.custom.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
    <!--<script src="/assets/tools/plugins/jquery-ui/jquery-ui-1.10.3.custom.min.js" type="text/javascript"></script>-->
    <!--<script src="/assets/tools/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>-->
    <!--<script src="/assets/tools/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>-->
    <!--<script src="/assets/tools/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>-->
    <!--<script src="/assets/tools/plugins/jquery.blockui.min.js" type="text/javascript"></script>-->
    <!--<script src="/assets/tools/plugins/jquery.cokie.min.js" type="text/javascript"></script>-->
    <!--<script src="/assets/tools/plugins/uniform/jquery.uniform.min.js" type="text/javascript"></script>-->
    <!-- END CORE PLUGINS -->

    <!--<script src="/assets/tools/plugins/beautify.js"></script>-->
    <!--<script src="/assets/tools/plugins/beautify-css.js"></script>-->
    <!--<script src="/assets/tools/plugins/beautify-html.js"></script>-->


    <!-- BEGIN PAGE LEVEL PLUGINS -->

    <script src="/assets/tools/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>

<!--    <script type="text/javascript" src="/assets/tools/plugins/bootstrap-editable/bootstrap-editable/js/bootstrap-editable.js"></script>-->
<!--    <script src="/assets/tools/plugins/bootbox/bootbox.min.js" type="text/javascript"></script>-->

    <script src="/assets/tools/plugins/jquery-notific8/jquery.notific8.min.js"></script>
    <script type="text/javascript" src="/assets/tools/plugins/select2/select2.min.js"></script>

    <!--<script type="text/javascript" src="//cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>-->
    <!--<script type="text/javascript" src="/assets/tools/plugins/data-tables/jquery.dataTables.js"></script>-->
    <!--<script type="text/javascript" src="//cdn.datatables.net/1.10.1/js/jquery.dataTables.js"></script>-->
    <script type="text/javascript" src="//cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>
    <script type="text/javascript" src="//cdn.datatables.net/responsive/1.0.0/js/dataTables.responsive.js"></script>

    <!-- TOOLS -->
    <script src="/assets/tools/plugins/jsonpath/jsonpath-0.8.0.js"></script>
    <script src="/assets/tools/plugins/jquery.jsonXmlTools.js"></script>
    <script src="/assets/tools/plugins/index.tools.js"></script>
    <script src="/assets/tools/plugins/uglify2/wrapper.js"></script>
    <script src="/assets/tools/plugins/codemirror-4.1/lib/codemirror.js"></script>
    <script src="/assets/tools/plugins/codemirror-4.1/addon/edit/matchbrackets.js"></script>
    <script src="/assets/tools/plugins/codemirror-4.1/addon/comment/continuecomment.js"></script>
    <script src="/assets/tools/plugins/codemirror-4.1/addon/comment/comment.js"></script>
    <script src="/assets/tools/plugins/codemirror-4.1/addon/format/format.js"></script>
    <script src="/assets/tools/plugins/codemirror-4.1/mode/javascript/javascript.js"></script>
    <script src="/assets/tools/plugins/codemirror-4.1/mode/xml/xml.js"></script>

    <script src="/assets/tools/plugins/beautify/beautify.js"></script>
    <script src="/assets/tools/plugins/beautify/beautify-css.js"></script>
    <script src="/assets/tools/plugins/beautify/beautify-html.js"></script>

    <!--<script src="/assets/tools/scripts/core/app.js"></script>-->
    <!--<script src="/assets/tools/scripts/custom/ui-alert-dialog-api.js"></script>-->


    <!-- ASCII TABLE -->
    <script>
        // ASCII TABLE
        var oAsciiData;
        // $.noConflict();
        $(document).ready(function() {
            //App.initAjax();
            if ($('#ascii').length >0) {
                oAsciiData = $('#ascii').DataTable({
                    "bLengthChange": true
                    , "bPaginate": true
                    , "bSort": true
                    , "aLengthMenu": [
                        [20, 50, 100, -1],
                        [20, 50, 100, "All"] // change per page values here
                    ],
                    // set the initial value
                    "iDisplayLength": 20,
                    "oLanguage": {
                        "sLengthMenu": "_MENU_ records",
                        "oPaginate": {
                            "sPrevious": "Prev",
                            "sNext": "Next"
                        }
                    }
                    , "aoColumnDefs": [{
                        'bSortable': false,
                        'bSearchable': true,
                        'aTargets': [0]
                    }]

                });

                $("#ascii_wrapper .dataTables_filter input").addClass("form-control input-medium input-inline"); // modify table search input
                $("#ascii_wrapper .dataTables_length select").addClass("form-control input-small"); // modify table per page dropdown
                $("#ascii_wrapper .dataTables_length select").select2({minimumResultsForSearch: -1}); // initialize select2 dropdown
            }
        });
    </script>
    <!-- STRING TOOLS -->
    <script>
        //STRING TOOLS

        var editors = {
            history: null
        }

        jQuery(document).ready(function() {
            //App.initAjax();
            if ($("#txtFrom").length > 0 && $("#txtTo").length > 0 && $("#selDirection").length > 0) {

                objFrom = $("#txtFrom").get(0); // document.getElementById("txtFrom");
                objTo = $("#txtTo").get(0); //  document.getElementById("txtTo");

                objRadixFrom = $("#cboRadixFrom").get(0); // document.getElementById("cboRadixFrom");
                objRadixTo = $("#cboRadixTo").get(0); // document.getElementById("cboRadixTo");


                for (var i = 2; i <= 32; i++) {
                    $("#cboRadixTo").append($("<option></option>").text(enumRadixType[i]).val(i));
                    $("#cboRadixFrom").append($("<option></option>").text(enumRadixType[i]).val(i));
                }

                editors.history = $('#historyData').DataTable({
                    "bLengthChange": true
                    , "bPaginate": true
                    , "bSort": true
                    , "aLengthMenu": [
                        [5, 15, 20, -1],
                        [5, 15, 20, "All"] // change per page values here
                    ],
                    // set the initial value
                    "iDisplayLength": 5,

                    "oLanguage": {
                        "sLengthMenu": "_MENU_ records",
                        "oPaginate": {
                            "sPrevious": "Prev",
                            "sNext": "Next"
                        }
                    }
                    , "aoColumnDefs": [{
                        'bSortable': false,
                        'bSearchable': true,
                        'aTargets': [0]
                    }]

                    , "columns": [
                        {data: 'id', "width": "auto"},
                        {data: null, "width": "auto"},
                        {data: null, "width": "85%"},
                        {data: 'type', "width": "auto"},
                        {data: 'direction', "width": "auto"},
                        {
                            data: null, "width": "15%",
                            className: "center",
                            defaultContent: '<button type="button" class="historyReplay" onclick="doHistoryReplay($(this).parents(\'tr\')[0])"><span class="fa fa-play"></span> Replay</button> <button type="button" onclick="doRowHistoryDelete($(this).parents(\'tr\')[0])"><span class="fa fa-trash"></span> Delete</button>'
                        }
                        ,{data: "label", visible: false, "width": "auto"}
                        ,{data: "value", visible: false, "width": "auto"}
                    ]

                    , "columnDefs": [
                        {
                            "targets": 1,
                            "width": "auto",
                            "render": function (data, type, row, meta) {
                                return '<input type="text" class="editable" onchange="doRowHistoryEdit(' + meta.row + ',\'_label\',$(this).val())" value="' + data.label() + '" />';
                            }
                        },
                        {
                            "targets": 2,
                            "width": "auto",
                            "render": function (data, type, row, meta) {
                                return '<input type="text" class="editable" onchange="doRowHistoryEdit(' + meta.row + ',\'_label\',$(this).val())" value="' + data.value() + '" />';
                            }
                        }
                    ]

                    , "aoColumns": [
                        {"sClass": "numeric"},
                        {"sClass": ""},
                        {"sClass": ""},
                        {"sClass": "numeric"},
                        {"sClass": "numeric"},
                        {"sClass": "text-center"},
                        {"sClass": ""}
                    ],

                });

                $("#historyData_wrapper .dataTables_filter input").addClass("form-control input-medium input-inline"); // modify table search input
                $("#historyData_wrapper .dataTables_length select").addClass("form-control input-small"); // modify table per page dropdown
                $("#historyData_wrapper .dataTables_length select").select2({minimumResultsForSearch: -1}); // initialize select2 dropdown
                $("#historyData_wrapper .dataTables_length select").change(function () {
                    editors.history.find('.historyLabel').editable();
                });


                $('#selDirection').select2({minimumResultsForSearch: -1});
                $('#cboRadixFrom').select2({width: "120px"});
                $('#cboRadixFrom').on("select2-selecting", function () {
                    doEncode(enumEncodeType.BaseChange)
                });

                $('#cboRadixTo').select2({width: "120px"});
                $('#cboRadixTo').on("select2-selecting", function () {
                    doEncode(enumEncodeType.BaseChange)
                });
            }
        });
    </script>
    <!-- SCRIPT TOOLS -->
    <script>
        //SCRIPT TOOLS

        var enumScriptExecType = {
            returnAlert: 0,
            returnSilent: 1,
            returnOutput: 2,
            returnEval: 3
        }

        var editors = {
            use_codemirror: (!window.location.href.match(/without-codemirror/)),
            beautify_in_progress: false,
            source: null, // codemirror editor
            result: null

        };

        //jsbeautifier.org

        function any(a, b) {
            return a || b;
        }

        function read_settings_from_cookie() {
            $('#tabsize').val(any($.cookie('tabsize'), '4'));
            $('#brace-style').val(any($.cookie('brace-style'), 'collapse'));
            $('#detect-packers').attr('checked', $.cookie('detect-packers') !== 'off');
            $('#max-preserve-newlines').val(any($.cookie('max-preserve-newlines'), '5'));
            $('#keep-array-indentation').attr('checked', $.cookie('keep-array-indentation') === 'on');
            $('#break-chained-methods').attr('checked', $.cookie('break-chained-methods') === 'on');
            $('#indent-scripts').val(any($.cookie('indent-scripts'), 'normal'));
            $('#space-before-conditional').attr('checked', $.cookie('space-before-conditional') !== 'off');
            $('#wrap-line-length').val(any($.cookie('wrap-line-length'), '0'));
            $('#unescape-strings').attr('checked', $.cookie('unescape-strings') === 'on');
        }

        function store_settings_to_cookie() {
            var opts = {
                expires: 360
            };
            $.cookie('tabsize', $('#tabsize').val(), opts);
            $.cookie('brace-style', $('#brace-style').val(), opts);
            $.cookie('detect-packers', $('#detect-packers').attr('checked') ? 'on' : 'off', opts);
            $.cookie('max-preserve-newlines', $('#max-preserve-newlines').val(), opts);
            $.cookie('keep-array-indentation', $('#keep-array-indentation').attr('checked') ? 'on' : 'off', opts);
            $.cookie('break-chained-methods', $('#break-chained-methods').attr('checked') ? 'on' : 'off', opts);
            $.cookie('space-before-conditional', $('#space-before-conditional').attr('checked') ? 'on' : 'off',
                opts);
            $.cookie('unescape-strings', $('#unescape-strings').attr('checked') ? 'on' : 'off', opts);
            $.cookie('wrap-line-length', $('#wrap-line-length').val(), opts);
            $.cookie('indent-scripts', $('#indent-scripts').val(), opts);
        }

        function inline() {
            editors.result.setValue(editors.source.getValue(" ").replace(/\t|\s\s/g,""));
        }

        function beautify() {
            if (editors.beautify_in_progress) return;

            //store_settings_to_cookie();

            editors.beautify_in_progress = true;

            var source = editors.source ? editors.source.getValue() : $('#txtJavaScriptSource').val(),
                output,
                opts = {};

            opts.indent_size = $('#tabsize').val();
            opts.indent_char = opts.indent_size == 1 ? '\t' : ' ';
            opts.max_preserve_newlines = $('#max-preserve-newlines').val();
            opts.preserve_newlines = opts.max_preserve_newlines !== -1;
            opts.keep_array_indentation = $('#keep-array-indentation').attr('checked');
            opts.break_chained_methods = $('#break-chained-methods').attr('checked');
            opts.indent_scripts = $('#indent-scripts').val();
            opts.brace_style = $('#brace-style').val();
            opts.space_before_conditional = $('#space-before-conditional').attr('checked');
            opts.unescape_strings = $('#unescape-strings').attr('checked');
            opts.wrap_line_length = $('#wrap-line-length').val();
            opts.space_after_anon_function = true;

            if (looks_like_html(source)) {
                output = html_beautify(source, opts);
            } else {
                if ($('#detect-packers').attr('checked')) {
                    source = unpacker_filter(source);
                }
                output = js_beautify(source, opts);
            }
            if (editors.source) {
                editors.source.setValue(output);
            } else {
                $('#source').val(output);
            }

            editors.beautify_in_progress = false;
        }

        function looks_like_html(source) {
            // <foo> - looks like html
            // <!--\nalert('foo!');\n--> - doesn't look like html

            var trimmed = source.replace(/^[ \t\n\r]+/, '');
            var comment_mark = '<' + '!-' + '-';
            return (trimmed && (trimmed.substring(0, 1) === '<' && trimmed.substring(0, 4) !== comment_mark));
        }

        //uglify
        function uglify2(options) {
            try {
                editors.result.setValue(Uglify.uglify(editors.source.getValue(),options));
            } catch (ex) {
                //console.log(ex);
                editors.result.setValue(Uglify.format_error(ex, editors.source.getValue()));
            }
        }

        function doScriptExec(scriptExecType) {
            var rValue;
            try {
                switch (scriptExecType) {
                    case enumScriptExecType.returnAlert:
                        rValue = eval(editors.source.getValue("\n"));
                        bootbox.alert(rValue.replace(/\n/gi,"<br>"));
                        break;
                    case enumScriptExecType.returnSilent:
                        rValue = eval(editors.source.getValue() + ";");
                        editors.result.setValue("ok");
                        break;
                    case enumScriptExecType.returnOutput:
                        rValue = eval(editors.source.getValue() + ";");
                        editors.result.setValue(rValue);
                        break;
                    case enumScriptExecType.returnEval:
                        var strSource = editors.result.getValue();
                        if (strSource !== "") {
                            try {
                                rValue = eval(strSource);
                                bootbox.alert(rValue.replace(/\n/gi,"<br>"));
                            } catch (ex) {
                                bootbox.alert(Uglify.format_error(ex, strSource));
                            }
                        }
                        break;
                }
            } catch (ex) {
               editors.result.setValue(ex);
            }

        }


        jQuery(document).ready(function() {

            if ($("#txtJavaScriptSource").length > 0 &&  $("#txtJavaScriptResult").length > 0) {

                editors.source = CodeMirror.fromTextArea(document.getElementById("txtJavaScriptSource"), {
                    mode: "javascript",
                    lineNumbers: true,
                    matchBrackets: true,
                    continueComments: "Enter",
                    extraKeys: {"Ctrl-Q": "toggleComment"}
                });

                editors.result = CodeMirror.fromTextArea(document.getElementById("txtJavaScriptResult"), {
                    mode: "javascript",
                    lineNumbers: true,
                    matchBrackets: true,
                    continueComments: "Enter",
                    extraKeys: {"Ctrl-Q": "toggleComment"}
                });

                beautify();
            }
        });



    </script>
    <!-- XML TRANSFORM -->
    <script>
        // XML TRANSFORM
        var editors = {
            xmlsource: null,
            xsltsource: null,
            xmlerror: null,
            xmlout: null
        }

        var enumXMLTransformAction = {
            actionEval: 0,
            actionProcess: 1
        }

        function doXMLTransform(XMLTransformAction) {
            //console.log('doXMLTransform');
            var strEval = "";
            var objSource = $("#txtXMLSource")[0]; //document.getElementById("txtXMLSource");
            var objTransform = $("#txtXMLTransformSource")[0]; //document.getElementById("txtXMLTransformSource");
            var objError = $("#txtXMLTransformError")[0]; //document.getElementById("txtXMLTransformError");
            var objOutput = $("#txtXMLTransformOutput")[0]; //document.getElementById("txtXMLTransformOutput");
            var objXmlSource;// = document.getElementById("xmlSource");
            var objXmlStyle;// = document.getElementById("xmlStyle");

            switch (XMLTransformAction) {
                case enumXMLTransformAction.actionEval:
                    break;
                case enumXMLTransformAction.actionProcess:
                    try {
                        if (window.DOMParser == null) {
                            try {
                                objXmlSource = $("#xmlSource")[0]; //document.getElementById("xmlSource"); // new ActiveXObject("Microsoft.XMLDOM");
                                objXmlStyle = $("#xmlStyle")[0]; //document.getElementById("xmlStyle"); // new ActiveXObject("Microsoft.XMLDOM");
                            } catch (ex) {
                                console.log("xml support?");
                            }
                        }
                    } catch (ex) {
                        editors.xmlerror.setValue("<b>Error<b/><br><p>No XML parser<p/>");
                        //doSetValue(objOutput, "<b>Error<b/><br><p>No XML parser<p/>", enumValueType.InnerText)
                        //objOutput.innerText = "<b>Error<b/><br><p>No XML parser<p/>";
                    }
                    try {
                        if (window.DOMParser == null) {
                            objXmlSource.loadXML(editors.xmlsource.getValue()); //doGetValue(objSource,enumValueType.InnerText)
                            objXmlStyle.loadXML(editors.xsltsource.getValue()); //doGetValue(objTransform, enumValueType.InnerText));
                            var sOut = objXmlSource.transformNode(objXmlStyle.XMLDocument);
                            editors.xmlout.setValue(sOut); // doSetValue(objOutput, objXmlSource.transformNode(objXmlStyle.XMLDocument), enumValueType.InnerText)
                            console.log(sOut);
                            //objOutput.innerText = objXmlSource.transformNode(objXmlStyle.XMLDocument);
                        } else {
                            var parser = new DOMParser();
                            //console.log(objSource.value);
                            objXmlSource = parser.parseFromString(editors.xmlsource.getValue(), "text/xml");
                            objXmlStyle = parser.parseFromString(editors.xsltsource.getValue(), "text/xml");
                            //console.log(objXmlSource);
                            //console.log(objXmlStyle);
                            objXmlProcessor = new XSLTProcessor();
                            objXmlProcessor.importStylesheet(objXmlStyle);
                            //console.log(objXmlProcessor);
                            var objXMLResult = objXmlProcessor.transformToFragment(objXmlSource, document);
                            //console.log(objXMLResult);
                            var objXMLSerialiser = new XMLSerializer(objXMLResult);
                            //console.log(objXMLSerialiser);
                            var sOut = objXMLSerialiser.serializeToString(objXMLResult);
                            editors.xmlout.setValue(sOut);
                            console.log(sOut);
                            //objOutput.value = objXMLSerialiser.serializeToString(objXMLResult);
                        }
                    } catch (ex) {
                        var sError = "<b>Error:</b><br>" + ex;
                        sError += "<br><br><b>Source Error:</b><br>" + objXmlSource.parseError.reason + "<br><b>Line:</b><br>" + objXmlSource.parseError.srcText;
                        sError += "<br><br><b>Style Error:</b><br>" + objXmlStyle.parseError.reason + "<br><b>Line:</b><br>" + objXmlStyle.parseError.srcText;
                        editors.xmlerror.setValue(sError);
                    }
                    break;
            }

            /*
             //ie only
             objXmlSource = document.getElementById("xmlSource");
             objXmlStyle = document.getElementById("xmlStyle");

             switch (XMLTransformAction) {
             case enumXMLTransformAction.actionEval:
             break;
             case enumXMLTransformAction.actionProcess:
             try {
             objXmlSource.loadXML(objSource.innerText);
             objXmlStyle.loadXML(objTransform.innerText);
             objOutput.innerText = objXmlSource.transformNode(objXmlStyle.XMLDocument);
             } catch (ex) {
             objError.innerHTML = "<b>Error:</b><br>" + ex;
             objError.innerHTML += "<br><br><b>Source Error:</b><br>" + objXmlSource.parseError.reason + "<br><b>Line:</b><br>" + objXmlSource.parseError.srcText;
             objError.innerHTML += "<br><br><b>Style Error:</b><br>" + objXmlStyle.parseError.reason + "<br><b>Line:</b><br>" + objXmlStyle.parseError.srcText;
             }

             break;
             }
             */

        }


        jQuery(document).ready(function() {
            //App.initAjax();
            if ($("#txtXMLSource").length > 0 && $("#txtXMLTransformSource").length > 0) {

                //loadBodyScript("js/codemirror-4.1/mode/xml/xml.js");
                //loadBodyScript("js/codemirror-4.1/addon/format/format.js");

                editors.xmlsource = CodeMirror.fromTextArea(document.getElementById("txtXMLSource"), {
                    mode: "xml",
                    lineNumbers: true,
                    matchBrackets: true,
                    continueComments: "Enter",
                    extraKeys: {"Ctrl-Q": "toggleComment"}
                });

                //console.log(['a1',$("#txtXMLTransformSource").val()]);


                editors.xsltsource = CodeMirror.fromTextArea($("#txtXMLTransformSource")[0], {
                    mode: "xml",
                    lineNumbers: true,
                    matchBrackets: true,
                    continueComments: "Enter",
                    extraKeys: {"Ctrl-Q": "toggleComment"}
                });

                editors.xmlerror = CodeMirror.fromTextArea(document.getElementById("txtXMLTransformError"), {
                    mode: "xml",
                    lineNumbers: true,
                    matchBrackets: true,
                    continueComments: "Enter",
                    extraKeys: {"Ctrl-Q": "toggleComment"}
                });

                editors.xmlout = CodeMirror.fromTextArea(document.getElementById("txtXMLTransformOutput"), {
                    mode: "xml",
                    lineNumbers: true,
                    matchBrackets: true,
                    continueComments: "Enter",
                    extraKeys: {"Ctrl-Q": "toggleComment"}
                });

                editors.xmlsource.autoFormat();
                editors.xsltsource.autoFormat();
            }
        });
    </script>
    <!-- JSON XML -->
    <script>
        // JSON XML

        var editors = {
            xmlsource: null,
            jsonsource: null
        }

        var enumJsonXMLConvertType = {
            jsonToXML:0,
            xmlToJson:1
        }


        function doJsonXml(jsonXMLConvertType) {
            switch (jsonXMLConvertType) {
                case enumJsonXMLConvertType.jsonToXML:
                    try {
                        editors.xmlsource.setValue($.json2xml("",$.parseJSON(editors.jsonsource.getValue()),$("#txtJsonXmlExcludeBlanks").val()=='on'));
                        doJsonXmlFormat(enumJsonXMLConvertType.xmlToJson);
                    } catch (ex) {
                        $("#txtJsonXmlSourceError").val(ex.toString());
                    }
                    break;
                case enumJsonXMLConvertType.xmlToJson:
                    try {
                        editors.jsonsource.setValue(JSON.stringify($.xml2json(editors.xmlsource.getValue(),$("#txtJsonXmlExtended").val()=='on')),null,4);
                        doJsonXmlFormat(enumJsonXMLConvertType.jsonToXML);
                    } catch (ex) {
                        $("#txtJsonXmlDestinationError").val(ex.toString());
                    }
                    break;
            }
        }

        function doJsonXmlFormat(jsonXMLConvertType) {
            switch (jsonXMLConvertType) {
                case enumJsonXMLConvertType.jsonToXML:
                    try {
                        editors.jsonsource.setValue(JSON.stringify($.parseJSON(editors.jsonsource.getValue()),null,4));
                    } catch (ex) {
                        $("#txtJsonXmlSourceError").val(ex.toString());
                    }
                    break;
                case enumJsonXMLConvertType.xmlToJson:
                    try {
                        editors.xmlsource.setValue(formatXml(editors.xmlsource.getValue())); //txtJsonXmlFormat
                    } catch (ex) {
                        $("#txtJsonXmlDestinationError").val(ex.toString());
                    }
                    break;
            }
        }



        function doTextFormat(textFormatTypeType) {

            var objTextSource = document.getElementById("txtTextSource");
            switch (textFormatTypeType) {
                case enumTextFormatType.asJsonText:
                    try {
                        $("#txtTextSource").val(JSON.stringify($.parseJSON($("#txtTextSource").val()),null,4));
                    } catch (ex) {
                        $("#txtTextSourceError").val(ex.toString());
                    }
                    $( "#txtTextSource" ).change(); //(facepalm)
                    break;
                case enumTextFormatType.asXMLText:
                    try {
                        $("#txtTextSource").val(formatXml($("#txtTextSource").val())); //txtJsonXmlFormat
                    } catch (ex) {
                        $("#txtTextSourceError").val(ex.toString());
                    }

                    $( "#txtTextSource" ).change(); //(facepalm)
                    break;
            }

        }

        function formatXml(xml) {
            var reg = /(>)(<)(\/*)/g;
            var wsexp = / *(.*) +\n/g;
            var contexp = /(<.+>)(.+\n)/g;
            xml = xml.replace(reg, '$1\n$2$3').replace(wsexp, '$1\n').replace(contexp, '$1\n$2');
            var pad = 0;
            var formatted = '';
            var lines = xml.split('\n');
            var indent = 0;
            var lastType = 'other';
            // 4 types of tags - single, closing, opening, other (text, doctype, comment) - 4*4 = 16 transitions
            var transitions = {
                'single->single': 0,
                'single->closing': -1,
                'single->opening': 0,
                'single->other': 0,
                'closing->single': 0,
                'closing->closing': -1,
                'closing->opening': 0,
                'closing->other': 0,
                'opening->single': 1,
                'opening->closing': 0,
                'opening->opening': 1,
                'opening->other': 1,
                'other->single': 0,
                'other->closing': -1,
                'other->opening': 0,
                'other->other': 0
            };

            for (var i = 0; i < lines.length; i++) {
                var ln = lines[i];
                var single = Boolean(ln.match(/<.+\/>/)); // is this line a single tag? ex. <br />
                var closing = Boolean(ln.match(/<\/.+>/)); // is this a closing tag? ex. </a>
                var opening = Boolean(ln.match(/<[^!].*>/)); // is this even a tag (that's not <!something>)
                var type = single ? 'single' : closing ? 'closing' : opening ? 'opening' : 'other';
                var fromTo = lastType + '->' + type;
                lastType = type;
                var padding = '';

                indent += transitions[fromTo];
                for (var j = 0; j < indent; j++) {
                    padding += '\t';
                }
                if (fromTo == 'opening->closing')
                    formatted = formatted.substr(0, formatted.length - 1) + ln + '\n'; // substr removes line break (\n) from prev loop
                else
                    formatted += padding + ln + '\n';
            }

            return formatted;
        }

        jQuery(document).ready(function() {
            //App.initAjax();
            if ($("#txtJsonXmlSource").length > 0 && $("#txtJsonXmlDestination").length > 0) {

//        $.getScript("js/codemirror-4.1/mode/xml/xml.js");
//        $.getScript("js/codemirror-4.1/addon/format/format.js");


                editors.jsonsource = CodeMirror.fromTextArea(document.getElementById("txtJsonXmlSource"), {
                    mode: "javascript",
                    lineNumbers: true,
                    matchBrackets: true,
                    continueComments: "Enter",
                    extraKeys: {"Ctrl-Q": "toggleComment"}
                });

                editors.jsonsource.autoFormat();
                //console.log(['a1',$("#txtXMLTransformSource").val()]);


                editors.xmlsource = CodeMirror.fromTextArea($("#txtJsonXmlDestination")[0], {
                    mode: "xml",
                    lineNumbers: true,
                    matchBrackets: true,
                    continueComments: "Enter",
                    extraKeys: {"Ctrl-Q": "toggleComment"}
                });

                editors.xmlsource.autoFormat();

                //editors.xmlsource.autoFormat();
                //editors.jsonsource.autoFormat();
            }
        });
    </script>
    <!-- JSON PATH -->
    <script>
        // JSON PATH

        var editors = {
            result: null,
            jsonsource: null,
            jsonpath: null,
            history: null
        };


        jQuery(document).ready(function() {
            //App.initAjax();
            if ($("#txtFrom").length > 0 && $("#txtJsonPath").length > 0 && $("#historyData").length > 0) {
                editors.history = $('#historyData').DataTable({
                    "bLengthChange": true
                    , "bPaginate": true
                    , "bSort": true
                    , "aLengthMenu": [
                        [5, 15, 20, -1],
                        [5, 15, 20, "All"] // change per page values here
                    ],
                    // set the initial value
                    "iDisplayLength": 5,

                    "oLanguage": {
                        "sLengthMenu": "_MENU_ records",
                        "oPaginate": {
                            "sPrevious": "Prev",
                            "sNext": "Next"
                        }
                    }
                    , "aoColumnDefs": [{
                        'bSortable': false,
                        'bSearchable': true,
                        'aTargets': [0]
                    }]

                    , "columns": [
                        {data: 'id', "width": "auto"},
                        {data: null, "width": "auto"},
                        {data: null, "width": "85%"},
                        {data: 'type', "width": "auto"},
                        {data: 'direction', "width": "auto"},
                        {
                            data: null, "width": "15%",
                            className: "center",
                            defaultContent: '<button type="button" class="historyReplay"><span class="fa fa-play"></span> Replay</button> <button type="button" onclick="doRowHistoryDelete($(this).parents(\'tr\')[0])"><span class="fa fa-trash"></span> Delete</button>'
                        }
                        ,{data: "label", visible: false, "width": "auto"}
                        ,{data: "value", visible: false, "width": "auto"}
                    ]

                    , "columnDefs": [
                        {
                            "targets": 1,
                            "width": "auto",
                            "render": function (data, type, row, meta) {
                                return '<input type="text" class="editable" onchange="doRowHistoryEdit(' + meta.row + ',\'_label\',$(this).val())" value="' + data.label() + '" />';
                            }
                        },
                        {
                            "targets": 2,
                            "width": "auto",
                            "render": function (data, type, row, meta) {
                                return '<input type="text" class="editable" onchange="doRowHistoryEdit(' + meta.row + ',\'_label\',$(this).val())" value="' + data.value() + '" />';
                            }
                        }
                    ]

                    , "aoColumns": [
                        {"sClass": "numeric"},
                        {"sClass": ""},
                        {"sClass": ""},
                        {"sClass": "numeric"},
                        {"sClass": "numeric"},
                        {"sClass": "text-center"},
                        {"sClass": ""}
                    ]

                });
                console.log(editors.history)

                $("#historyData_wrapper .dataTables_filter input").addClass("form-control input-medium input-inline"); // modify table search input
                $("#historyData_wrapper .dataTables_length select").addClass("form-control input-small"); // modify table per page dropdown
                $("#historyData_wrapper .dataTables_length select").select2({minimumResultsForSearch: -1}); // initialize select2 dropdown
                $("#historyData_wrapper .dataTables_length select").change(function () {
                    editors.history.find('.historyLabel').editable();
                });

                editors.jsonsource = CodeMirror.fromTextArea(document.getElementById("txtFrom"), {
                    mode: "javascript",
                    lineNumbers: true,
                    matchBrackets: true,
                    continueComments: "Enter",
                    extraKeys: {"Ctrl-Q": "toggleComment"}
                });


                editors.jsonsource.setSize('dynamic', '500px');
                editors.jsonsource.autoFormat();
                //console.log(['a1',$("#txtXMLTransformSource").val()]);


                editors.result = CodeMirror.fromTextArea($("#txtTo")[0], {
                    mode: "javascript",
                    lineNumbers: true,
                    matchBrackets: true,
                    continueComments: "Enter",
                    extraKeys: {"Ctrl-Q": "toggleComment"},
                    viewportMargin: Infinity
                });


                editors.result.autoFormat();

                editors.jsonpath = CodeMirror.fromTextArea($("#txtJsonPath")[0], {
                    mode: "javascript",
                    lineNumbers: true,
                    matchBrackets: true,
                    continueComments: "Enter",
                    extraKeys: {"Ctrl-Q": "toggleComment"}
                });

                editors.jsonpath.autoFormat();


                $("#formatsource").click(function () {
                    editors.jsonsource.setValue(JSON.stringify($.parseJSON(editors.jsonsource.getValue()), null, 4));
                });
                $("#formatjsonpath").click(function () {
                    editors.jsonpath.setValue(JSON.stringify($.parseJSON(editors.jsonpath.getValue()), null, 4)); //txtJsonXmlFormat
                });
                $("#formatresult").click(function () {
                    editors.result.setValue(JSON.stringify($.parseJSON(editors.result.getValue()), null, 4)); //txtJsonXmlFormat
                });

                var skipHistoryOnce = false;

                $("#parse").click(function () {
                    //var o = { /*...*/ },  // the 'store' JSON object from above

                    var sj = JSON.parse(editors.jsonsource.getValue().replace("\n", ""));
                    var jp = editors.jsonpath.getValue().replace("\n", "");

                    var output = jsonPath(sj, jp);

                    var stro = JSON.stringify(output);

                    editors.result.setValue(stro);
                    $("#formatresult").click();

                    if (!skipHistoryOnce) {
                        if (doCheckOption("trackHistory") != false) {
                            doHistoryAdd("json path", 0, 0, jp);
                            $(".historyReplay").click(function () {

                                var row = $(this).parents('tr')[0];

                                var aData  = editors.history.row( row ).data();

                                editors.jsonpath.setValue(aData.value());
                                skipHistoryOnce = true;
                                $("#parse").click();
                            });
                        }
                    } else {
                        skipHistoryOnce = false;
                    }

                });
            }

        });
    </script>
    <!-- IMAGE CONVERT -->
    <script>
        // IMAGE CONVERT
        if ($("#previewCanvas").length > 0) {


            //"use strict";
            var svgNS = "http://www.w3.org/2000/svg";
            var xlinkNS = "http://www.w3.org/1999/xlink";

            var iFile = document.getElementById("iFile");
            var oCanvas = document.getElementById("canvas");
            //var oCanvasCTX = oCanvas.getContext("2d");
            var iImage = document.getElementById("iImage");
            var pImage = document.getElementById("pImage");

            var oCanvas2 = document.getElementById('imgCanvas'); //SVG

            var objImage = document.getElementById("previewImage");
            var objFile = document.getElementById("inputImage");
            var objImageWidth = document.getElementById("txtImageWidth");
            var objImageHeight = document.getElementById("txtImageHeight");
            var objImageCanvas = document.getElementById("previewCanvas");
            var objImageCanvasContext = objImageCanvas.getContext("2d");
            var objImageCanvasResize = document.getElementById("previewCanvasResize");
            var objImageSVG = document.getElementById("previewSVG");
            var objImageSVGEmbed = document.getElementById("previewSVGEmbed");
            var objImageSVGResize = document.getElementById("previewSVGResize");
            var objImageSVGResizeEmbed = document.getElementById("previewSVGResizeEmbed");


            var objImageCanvasMaxWidth = document.getElementById("txtImageCanvasMaxWidth");
            var objImageCanvasMaxHeight = document.getElementById("txtImageCanvasMaxHeight");
            var objImageSVGMaxWidth = document.getElementById("txtImageSVGMaxWidth");
            var objImageSVGMaxHeight = document.getElementById("txtImageSVGMaxHeight");

            var objSourceImage = document.getElementById("txtSourceImage");
            var objSourceImageCanvas = document.getElementById("txtSourceImageCanvas");
            var objSourceImageCanvasResize = document.getElementById("txtSourceImageCanvasResize");
            var objSourceImageSVG = document.getElementById("txtSourceImageSVG");
            var objSourceImageSVGResize = document.getElementById("txtSourceImageSVGResize");

            function setValue(id, value) {
                document.getElementById(id).value = value;
            }

            function addValue(id, value) {
                document.getElementById(id).value += value;
            }

            function setSrc(id, value) {
                document.getElementById(id).setAttribute("src", value);
            }

            function getSrc(id) {
                return document.getElementById(id).getAttribute("src");
            }

            function createImage(src, w, h) {
                var oImage = document.createElementNS(svgNS, "image");
                oImage.setAttributeNS(xlinkNS, "xlink:href", src);
                oImage.setAttributeNS(null, "x", 0);
                oImage.setAttributeNS(null, "y", 0);
                oImage.setAttributeNS(null, "width", w + "px");
                oImage.setAttributeNS(null, "height", h + "px");
                return (oImage);
            }

            function utf8_to_b64(str) {
                return window.btoa(unescape(encodeURIComponent(str)));
            }

            function b64_to_utf8(str) {
                return decodeURIComponent(escape(window.atob(str)));
            }

            function doImagePrep(sourceImage) {
                //console.log(sourceImage);

                var imageLink57 = '<link rel="apple-touch-icon-precomposed" sizes="57x57" href="##" />';
                var imageLink72 = '<link rel="apple-touch-icon-precomposed" sizes="72x72" href="##" />';
                var imageLink114 = '<link rel="apple-touch-icon-precomposed" sizes="114x114" href="##" />';
                var imageLink144 = '<link rel="apple-touch-icon-precomposed" sizes="144x144" href="##" />';

                getImageBase64("previewImage57", sourceImage, function (imgURI) {
                    //console.log(imgURI)
                    setSrc('previewImage57', imgURI);
                    addValue('txtSourceImagePrep', imageLink57.replace("##", imgURI) + "\n");
                });
                getImageBase64("previewImage72", sourceImage, function (imgURI) {
                    setSrc('previewImage72', imgURI);
                    addValue('txtSourceImagePrep', imageLink72.replace("##", imgURI) + "\n");
                });
                getImageBase64("previewImage114", sourceImage, function (imgURI) {
                    setSrc('previewImage114', imgURI);
                    addValue('txtSourceImagePrep', imageLink114.replace("##", imgURI) + "\n");
                });
                getImageBase64("previewImage144", sourceImage, function (imgURI) {
                    setSrc('previewImage144', imgURI);
                    addValue('txtSourceImagePrep', imageLink144.replace("##", imgURI) + "\n");
                });


            }

            function doUpdate() {
                var file = objFile.files[0];
                var fileName = file.name;
                var fileSize = file.size;
                var URL = window.URL || window.webkitURL;

                objImage.setAttribute('src', URL.createObjectURL(file));
                var reader = new FileReader();
                reader.onload = function (evt) {
                    //var header = evt.target.result.substr(0,evt.target.result.indexOf(",")+1);
                    //var data = evt.target.result.substr(evt.target.result.indexOf(",")+1);
                    objSourceImage.value = evt.target.result;
                    setValue('txtSourceImageLength', objSourceImage.value.length);

                };


                reader.readAsDataURL(file);

                var img = new Image();
                img.onload = function () {
                    objImageWidth.value = img.width;
                    objImageHeight.value = img.height;

                    objImageCanvas.width = img.width;
                    objImageCanvas.height = img.height;
                    objImageCanvasContext.drawImage(img, 0, 0);
                    var data = objImageCanvas.toDataURL();
                    objSourceImageCanvas.value = data;
                    setValue('txtSourceImageCanvasLength', data.length);

                    doProcess();

                }

                img.src = objImage.src;


                doImgToCSS($('#imageToCSSOutput'));
            }

            function doProcess() {
                var maxWidth = objImageWidth.value;
                var maxHeight = objImageHeight.value;

                if (objImageCanvasMaxWidth.value != "" || isNaN(objImageCanvasMaxWidth.value)) {
                    maxWidth = parseInt(objImageCanvasMaxWidth.value);
                }
                objImage.style.maxWidth = maxWidth + "px";

                if (objImageCanvasMaxHeight.value != "") {
                    maxHeight = parseInt(objImageCanvasMaxHeight.value);
                }

                objImage.style.maxHeight = maxHeight + "px";

                var sgvHeader = '<?xml version="1.0" encoding="utf-8"?><\!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';
                var dataURISVG = 'data:image/svg+xml;charset=utf-8;base64,';


                //canavs
                getImageBase64(objImage, "", function (imgURI) {
                    objImageCanvasResize.setAttribute("src", imgURI);
                    objSourceImageCanvasResize.value = imgURI;
                    setValue('txtSourceImageCanvasResizeLength', imgURI.length);

                    //svg Resized
                    //objSourceImageCanvasResize
                    var svgImageResize = createImage(imgURI, objImageCanvasResize.width, objImageCanvasResize.height);
                    //clear SVG

                    for (var i = 0; i < objImageSVGResize.childNodes.length; i++) {
                        objImageSVGResize.removeChild(objImageSVGResize.childNodes[i]);
                    }
                    objImageSVGResize.appendChild(svgImageResize);
                    objImageSVGResize.style.width = objImageCanvasResize.width + "px";
                    objImageSVGResize.style.height = objImageCanvasResize.height + "px";


                    var svgXMLPartResize = (new XMLSerializer()).serializeToString(objImageSVGResize);
                    //namespace fix
                    svgXMLPartResize = svgXMLPartResize.replace('xmlns="http://www.w3.org/2000/svg" ', ' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(" href=", " xlink:href=");

                    //var dataURISVG = 'data:image/svg+xml,';
                    var svgXMLResize;

                    if ("btoa" in window) {
                        svgXMLResize = dataURISVG + btoa(sgvHeader + svgXMLPartResize);
                    } else {
                        svgXMLResize = dataURISVG + Base64.encode(sgvHeader + svgXMLPartResize);
                    }


                    objSourceImageSVGResize.value = svgXMLResize;

                    setValue('txtSourceImageSVGResizeLength', svgXMLResize.length);
                    objImageSVGResizeEmbed.setAttribute('src', svgXMLResize);

                    objImageSVGResizeEmbed.style.width = objImageCanvasResize.width + "px";
                    objImageSVGResizeEmbed.style.height = objImageCanvasResize.height + "px";

                    doImagePrep(imgURI);
                });

                //svg Original
                var svgImage = createImage(objSourceImage.value, objImageWidth.value, objImageHeight.value);
                //clear SVG
                for (var i = 0; i < objImageSVG.childNodes.length; i++) {
                    objImageSVG.removeChild(objImageSVG.childNodes[i]);
                }
                objImageSVG.appendChild(svgImage);
                objImageSVG.style.width = objImageWidth.value + "px";
                objImageSVG.style.height = objImageHeight.value + "px";


                var svgXMLPart = (new XMLSerializer()).serializeToString(objImageSVG);
                //namespace fix
                svgXMLPart = svgXMLPart.replace('xmlns="http://www.w3.org/2000/svg" ', ' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(" href=", " xlink:href=");

                //var dataURISVG = 'data:image/svg+xml,';
                var svgXML;

                if ("btoa" in window) {
                    //svgXML = dataURISVG+btoa(sgvHeader+svgXMLPart);
                    svgXML = dataURISVG + btoa(sgvHeader + svgXMLPart);
                } else {
                    svgXML = dataURISVG + Base64.encode(sgvHeader + svgXMLPart);
                }


                objSourceImageSVG.value = svgXML;

                setValue('txtSourceImageSVGLength', svgXML.length);
                objImageSVGEmbed.setAttribute('src', svgXML);

                objImageSVGEmbed.style.width = objImageWidth.value + "px";
                objImageSVGEmbed.style.height = objImageHeight.value + "px";


            }

            function getImageBase64(image, altSource, callback) {

                var sourceImg;
                if (typeof image === "string") {
                    sourceImg = document.getElementById(image);
                } else if (image.selector) {
                    sourceImg = image[0];
                } else {
                    sourceImg = image;
                }

                //aspect to fill max height
                var _width = parseInt(sourceImg.width);
                var _height = parseInt(sourceImg.height);

                var _widthMax = sourceImg.style.maxWidth;

                try {
                    _widthMax = parseInt(_widthMax);
                } catch (ex) {
                    _widthMax = _width;
                }
                var _heightMax = sourceImg.style.maxHeight;


                try {
                    _heightMax = parseInt(_heightMax);
                } catch (ex) {
                    _heightMax = _height;
                }

                var _aspectRatioBox = _widthMax / _heightMax;


                var img = new Image();
                img.onload = function () {

                    var oCanvas = document.createElement("canvas");
                    var oCanvasCTX = oCanvas.getContext("2d");

                    var _widthCurr = img.width;
                    var _heightCurr = img.height;
                    var _aspectRatioImg = _widthCurr / _heightCurr;

                    var _newHeight = 0; // _heightMax;
                    var _newWidth = 0; //_widthMax;


                    if (_aspectRatioImg < _aspectRatioBox) {
                        _newHeight = _heightMax;
                        _newWidth = _newHeight * _aspectRatioImg;
                    } else {
                        _newWidth = _widthMax;
                        _newHeight = _newWidth / _aspectRatioImg;
                    }

                    oCanvas.width = _newWidth;
                    oCanvas.height = _newHeight;
                    oCanvasCTX.drawImage(img, 0, 0, _newWidth, _newHeight);
                    console.log([img, oCanvas, oCanvasCTX, oCanvas.toDataURL("image/png")]);
                    //console.log(oCanvas.toDataURL());
                    if (typeof callback == "function") {
                        callback(oCanvas.toDataURL(), img.src);
                    }

                }
                if (altSource) {
                    //console.log("using alt source: "+altSource);
                    img.setAttribute("src", altSource);
                    //img.src = altSource;
                } else {
                    //console.log(sourceImg.src);
                    img.src = sourceImg.src;
                }
                return true;
            }


            function dataURItoBlob(dataURI) {
                // convert base64 to raw binary data held in a string
                // doesn't handle URLEncoded DataURIs
                var byteString = atob(dataURI.split(',')[1]);

                // separate out the mime component
                var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]

                // write the bytes of the string to an ArrayBuffer
                var ab = new ArrayBuffer(byteString.length);
                var ia = new Uint8Array(ab);
                for (var i = 0; i < byteString.length; i++) {
                    ia[i] = byteString.charCodeAt(i);
                }

                // write the ArrayBuffer to a blob, and you're done
                var bb = (window.MozBlobBuilder || window.WebKitBlobBuilder || window.BlobBuilder);
                bb.append(ab);
                return bb.getBlob(mimeString);
            }


            var Base64 = {
                // private property
                _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",

                // public method for encoding
                encode: function (input) {
                    var output = "";
                    var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
                    var i = 0;

                    input = Base64._utf8_encode(input);

                    while (i < input.length) {

                        chr1 = input.charCodeAt(i++);
                        chr2 = input.charCodeAt(i++);
                        chr3 = input.charCodeAt(i++);

                        enc1 = chr1 >> 2;
                        enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
                        enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
                        enc4 = chr3 & 63;

                        if (isNaN(chr2)) {
                            enc3 = enc4 = 64;
                        } else if (isNaN(chr3)) {
                            enc4 = 64;
                        }

                        output = output +
                            Base64._keyStr.charAt(enc1) + Base64._keyStr.charAt(enc2) +
                            Base64._keyStr.charAt(enc3) + Base64._keyStr.charAt(enc4);

                    }

                    return output;
                },

                // public method for decoding
                decode: function (input) {
                    var output = "";
                    var chr1, chr2, chr3;
                    var enc1, enc2, enc3, enc4;
                    var i = 0;

                    input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");

                    while (i < input.length) {

                        enc1 = Base64._keyStr.indexOf(input.charAt(i++));
                        enc2 = Base64._keyStr.indexOf(input.charAt(i++));
                        enc3 = Base64._keyStr.indexOf(input.charAt(i++));
                        enc4 = Base64._keyStr.indexOf(input.charAt(i++));

                        chr1 = (enc1 << 2) | (enc2 >> 4);
                        chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
                        chr3 = ((enc3 & 3) << 6) | enc4;

                        output = output + String.fromCharCode(chr1);

                        if (enc3 != 64) {
                            output = output + String.fromCharCode(chr2);
                        }
                        if (enc4 != 64) {
                            output = output + String.fromCharCode(chr3);
                        }

                    }

                    output = Base64._utf8_decode(output);

                    return output;

                },

                // private method for UTF-8 encoding
                _utf8_encode: function (string) {
                    string = string.replace(/\r\n/g, "\n");
                    var utftext = "";

                    for (var n = 0; n < string.length; n++) {

                        var c = string.charCodeAt(n);

                        if (c < 128) {
                            utftext += String.fromCharCode(c);
                        } else if ((c > 127) && (c < 2048)) {
                            utftext += String.fromCharCode((c >> 6) | 192);
                            utftext += String.fromCharCode((c & 63) | 128);
                        } else {
                            utftext += String.fromCharCode((c >> 12) | 224);
                            utftext += String.fromCharCode(((c >> 6) & 63) | 128);
                            utftext += String.fromCharCode((c & 63) | 128);
                        }

                    }

                    return utftext;
                },

                // private method for UTF-8 decoding
                _utf8_decode: function (utftext) {
                    var string = "";
                    var i = 0;
                    var c = 0, c1 = 0, c2 = 0;

                    while (i < utftext.length) {

                        c = utftext.charCodeAt(i);

                        if (c < 128) {
                            string += String.fromCharCode(c);
                            i++;
                        } else if ((c > 191) && (c < 224)) {
                            c1 = utftext.charCodeAt(i + 1);
                            string += String.fromCharCode(((c & 31) << 6) | (c1 & 63));
                            i += 2;
                        } else {
                            c1 = utftext.charCodeAt(i + 1);
                            c2 = utftext.charCodeAt(i + 2);
                            string += String.fromCharCode(((c & 15) << 12) | ((c1 & 63) << 6) | (c2 & 63));
                            i += 3;
                        }

                    }
                    return string;
                }
            }

            function doImgToCSS(destObj) {
                for (fileIndex in objFile.files) {
                    var file = objFile.files[fileIndex];
                    if (file != 'undefined') {
                        var fileName = file.name;
                        console.log(fileName);
                        var reader = new FileReader();
                        try {
                            reader.cssName = fileName.split(".")[0];
                        } catch (ex) {
                            //do nothing
                        }
                        reader.onload = function (evt) {
                            destObj.append("." + this.cssName + " {background-image:url(" + evt.target.result + "); }\n");
                        };
                        reader.readAsDataURL(file);
                    }
                }
            }


            jQuery(document).ready(function () {

                //console.log('load');

                //App.initAjax();
                $("#inputImage").change(function () {
                    //console.log('doUpdate');
                    doUpdate();
                });
                $("#doProcess").click(function () {
                    //console.log('doProcess');
                    doProcess();
                });

            });
        }


    </script>
    <!-- IMAGE MAP -->
    <script>
        // $.noConflict();

        //image map
        var startTop=-1;
        var startLeft=-1;
        var endTop=-1;
        var endLeft=-1;
        var currentSelector=null;
        var offsetTop;
        var offsetLeft;
        var sPin = "pin";

        var bStart=true;
        /*

         <map name=home>
         <area shape=Rect Coords=70,70,405,210 Href="rsvp">
         <area shape=Rect Coords=70,260,405,410 Href="comment">
         <area shape=Rect Coords=70,450,405,595 Href="request">
         </map>

         */



        function doDropped(oDrop) {

        }


        function updateCoords()
        {
            document.getElementById("top1").value=startTop;
            document.getElementById("left1").value=startLeft;
            document.getElementById("top2").value=endTop;
            document.getElementById("left2").value=endLeft;
        }
        function doDown(target,event)
        {
            //var g;
            //alert('a');
            /*if (bStart==true) {
             startLeft = window.event.clientX,
             startTop = window.event.clientY;
             } else {
             bStart=false;
             endLeft = window.event.clientX,
             endTop = window.event.clientY;
             doAddSelector(startTop,startLeft,startTop,startLeft);
             doUpdateMap();
             }
             */
//        var target = $(obj);
//        var event = $(event)[0];
//        //$(event)[0].clientX,$(event)[0].clientY
//        //console.log([target.offset(),clientX,clientY]);
//        console.log([event.clientY,target.offset().left,event.clientX,target.offset().top]);
            doPin(target,event);
        }

        function doSet() {
            doGenerateMap();
        }

        function OuterHTML(element) {
            var container = document.createElement("div");
            container.appendChild(element.cloneNode(true));

            return container.innerHTML;
        }
        var svgNS = "http://www.w3.org/2000/svg";
        var xlinkNS = "http://www.w3.org/1999/xlink";
        //this is where the pin visualy starts
        var pinOffsetX = 8;
        var pinOffsetY = 34;

        function createRect(x,y,w,h) {
            var oObj = document.createElementNS(svgNS, "rect");
            oObj.setAttributeNS(null, "x", x);
            oObj.setAttributeNS(null, "y", y);
            oObj.setAttributeNS(null, "width", w);
            oObj.setAttributeNS(null, "height", h);
            oObj.setAttributeNS(null, "fill-opacity", "0.4");
            oObj.setAttributeNS(null, "fill", "red");
            return (oObj);
        }

        function createCircle(x, y, r) {
            var oObj = document.createElementNS(svgNS, "circle");
            oObj.setAttributeNS(null, "cx", x);
            oObj.setAttributeNS(null, "cy", y);
            oObj.setAttributeNS(null, "r", r);
            oObj.setAttributeNS(null, "fill-opacity", "0.4");
            oObj.setAttributeNS(null, "fill", "red");
            return (oObj);
        }

        function createPolygon(points) {
            var oObj = document.createElementNS(svgNS, "polygon");
            oObj.setAttributeNS(null, "points", points);
            oObj.setAttributeNS(null, "fill-opacity", "0.4");
            oObj.setAttributeNS(null, "fill", "red");
            oObj.setAttributeNS(null, "fill-rule", "nonzero");
            return (oObj);
        }


        function createImage(src,w,h) {
            var oImage = document.createElementNS(svgNS, "image");
            oImage.setAttributeNS(xlinkNS, "xlink:href", src);
            oImage.setAttributeNS(null, "x", 0);
            oImage.setAttributeNS(null, "y", 0);
            oImage.setAttributeNS(null, "width", w);
            oImage.setAttributeNS(null, "height", h);
            return (oImage);
        }

        function doGenerateMap() {
            /*
             coords:
             radius - x,y,radius
             rect - x1,y1,x2,y2
             poly x1,y1,x2,y2,..,xn,yn
             */

            var sMap="";
            //var oPins = document.getElementsByTagName('img');
            var oPins = document.getElementsByName(sPin);
            var oImage = document.getElementById('imgMap');
            var oCanvas = document.getElementById('imgCanvas');

            oCanvas.setAttribute("width", oImage.width);
            oCanvas.setAttribute("height", oImage.height);

            var oCanvas = document.getElementById("imgCanvas");
            while (oCanvas.firstChild) {
                $(oCanvas.firstChild).remove();
            }


            //copy background
            var oBImage = createImage(oImage.src, oImage.width, oImage.height)
            oCanvas.appendChild(oBImage);


            var oMapType = document.getElementById('mapType');


            var sNewMap = "";
            var sCoordList = "";

            $("[name='pin']").filter("[areaType='rect']").each(function (key, value) {
                var cPin = $(this);


                switch (cPin.attr("pintype")) {
                    case "start":
                        sCoordList += (parseInt(cPin.css("left"), 10) + pinOffsetX) + "," + (parseInt(cPin.css("top"), 10) + pinOffsetY);
                        break;
                    case "end":
                        sCoordList += "," + (parseInt(cPin.css("left"), 10) + pinOffsetX) + "," + (parseInt(cPin.css("top"), 10) + pinOffsetY);
                        sNewMap += "<area shape=\"rect\" Coords=\"" + sCoordList + "\" Href=\"javascript:doClick('rect[x1,y1,x2,y2]:" + sCoordList + "')\">\n";

                        var aCoord = sCoordList.split(",");
                        oCanvas.appendChild(createRect(aCoord[0], aCoord[1], aCoord[2] - aCoord[0], aCoord[3] - aCoord[1]));

                        sCoordList = "";
                        break;
                }

            });
            $("[name='pin']").filter("[areaType='circle']").each(function (key, value) {
                var cPin = $(this);

                switch (cPin.attr("pintype")) {
                    case "start":
                        sCoordList += (parseInt(cPin.css("left"), 10) + pinOffsetX) + "," + (parseInt(cPin.css("top"), 10) + pinOffsetY);
                        break;
                    case "end":
                        var aCoord = sCoordList.split(",");

                        var x2 = parseInt(cPin.css("left")) + pinOffsetX;
                        var y2 = parseInt(cPin.css("top")) + pinOffsetY;

                        var rad = Math.floor(Math.sqrt(Math.pow(x2 - aCoord[0], 2) + Math.pow(y2 - aCoord[1], 2)));
                        sCoordList += "," + rad;
                        sNewMap += "<area shape=\"circle\" Coords=\"" + sCoordList + "\" Href=\"javascript:doClick('circle[x,y,rad]:" + sCoordList + "')\">\n";


                        oCanvas.appendChild(createCircle(aCoord[0], aCoord[1], rad));


                        sCoordList = "";
                        break;
                }


            });

            var lastPoint = "";

            $("[name='pin']").filter("[areaType='poly']").each(function (key, value) {
                var cPin = $(this);
                var isLast = ($("[name='pin']").last().attr("order") == cPin.attr("order"));
                var bPrint = (isLast) || (lastPoint == "point" && cPin.attr("pintype") == "start");

                var currentCoord = (parseInt(cPin.css("left"), 10) + pinOffsetX) + "," + (parseInt(cPin.css("top"), 10) + pinOffsetY);
                var sNewCoordList = "";

                switch (cPin.attr("pintype")) {
                    case "start":
                        sNewCoordList += currentCoord;
                        break;
                    case "point":
                        sNewCoordList += "," + currentCoord;
                        break;
                }


                if (bPrint) {

                    var printCoords = sCoordList;

                    if (isLast) {
                        printCoords += sNewCoordList;
                    }

                    sNewMap += "<area shape=\"poly\" Coords=\"" + printCoords + "\" Href=\"javascript:doClick('poly[x,...,n]:" + printCoords + "')\">\n";

                    oCanvas.appendChild(createPolygon(printCoords));

                    sCoordList = "";
                }

                sCoordList += sNewCoordList;

                lastPoint = cPin.attr("pintype");
            });


            var oMap = document.getElementById('outMap');
            oMap.value = "<map>" + sNewMap + "</map>";
            document.getElementById("mapPreview").innerHTML = sNewMap;

        }

        function doClick(scoords) {
            alert(scoords);
        }

        function doClear() {

            var oCanvas = document.getElementById("imgCanvas");
            while (oCanvas.firstChild) {
                $(oCanvas.firstChild).remove();
            }

            var oMap = document.getElementById("mapPreview");
            while (oMap.firstChild) {
                $(oMap.firstChild).remove();
            }



            var oPins = document.getElementsByName(sPin);
            for (var i=oPins.length;i>0;i--) {
                $(oPins[i-1]).remove();
            }

            doStart();

        }

        var sMarkerType = "start";

        function doStart() {
            sMarkerType = "start";
            $("#newRegion").addClass('disabled');

        }

        function doPin(obj,event) {
            var target = $(obj);
            var event = $(event)[0];

            var oPinLeft=event.pageX - target.offset().left;
            var oPinTop=event.pageY - target.offset().top;
            //console.log([oPinLeft,oPinTop]);

            var oPins = document.getElementsByName(sPin);
            var bCreate = false;
            var newPin = $("<img>");
            var oPin = document.createElement("img");
            var oMapType = document.getElementById('mapType');
            var sMapType="rect";
            var sNewMarkerType = "end";

            var allPins = $("[name='pin']");
            var bEnableNew = false;

            switch (oMapType.value) {
                case "2":  //rect
                    sMapType="rect";
                    if (sMarkerType == "start") {
                        newPin.attr("src","/assets/images/imagemap/PinDown1Green.png");
                        sNewMarkerType="end";
                        bCreate=true;
                    } else if (sMarkerType == "end") {
                        newPin.attr("src","/assets/images/imagemap/PinDown1Red.png");
                        bEnableNew=true;
                        sNewMarkerType="";
                        bCreate=true;
                    }
                    break;
                case "1":  //cir
                    sMapType="circle";
                    if (sMarkerType == "start") {
                        newPin.attr("src","/assets/images/imagemap/PinDown1Purple.png");
                        sNewMarkerType="end";
                        bCreate = true;
                    } else if (sMarkerType == "end") {
                        newPin.attr("src","/assets/images/imagemap/PinDown1Red.png");
                        bEnableNew=true;
                        sNewMarkerType="";
                        bCreate = true;
                    }
                    break;
                default:  //poly
                    sMapType="poly";
                    sNewMarkerType="point";
                    bEnableNew=true;
                    newPin.attr("src", "/assets/images/imagemap/PinDown1Purple.png");
                    bCreate = true;
            }

            if (bEnableNew) {
                $("#newRegion").removeClass('disabled');
                if (jQuery().pulsate) {
                    $('#imageActions').pulsate({
                        color: "#399bc3",
                        repeat: false
                    });
                }

            }

            if (bCreate==true) {
                newPin.attr("id",sPin)
                    .attr("name",sPin)
                    .attr("areaType",sMapType)
                    .attr("pinType",sMarkerType)
                    .attr("order",allPins.length)
                    .css("top",oPinTop-pinOffsetY)
                    .css("left",oPinLeft-pinOffsetX);

                $("#imgMapParent").append(newPin);

                newPin.draggable();

                sMarkerType = sNewMarkerType;
            }

            //console.log([sMarkerType,sNewMarkerType]);
        }

        function doEdit() {

            if (event.srcElement.id=="selector") {
                currentSelector=event.srcElement;
                console.log(currentSelector);
                currentSelector.style.width='1px';
                currentSelector.style.height='1px';
                var startLeft = currentSelector.offsetLeft;
                var startTop = currentSelector.offsetTop;
                var endLeft = window.event.clientX;
                var endTop = window.event.clientY;
                console.log(startTop,startLeft,endTop,endLeft);
                ResiseCurrentSelector(startTop,startLeft,endTop,endLeft);
            }

        }

        function doUpdateMap()
        {
            var sMap="";
            var oSelectors = document.getElementsByTagName('div');
            var oImage = document.getElementById('imgMap');
            for (var i=0;i<oSelectors.length;i++) {
                if (oSelectors[i].id=='selector') {
                    var x1=parseInt(oSelectors[i].style.left)-oImage.offsetLeft;
                    var y1=parseInt(oSelectors[i].style.top)-oImage.offsetTop;
                    var x2=parseInt(oSelectors[i].style.width)+x1;
                    var y2=parseInt(oSelectors[i].style.height)+y1;
                    sMap+="<area shape=Rect Coords=\""+x1+','+y1+','+x2+','+y2+"\" Href=\"javascript:doClick('area "+i+"')\" alt=\"area "+i+"\">\n"
                }
            }
            var oMap = document.getElementById('outMap');
            oMap.innerText=sMap;
            document.getElementById('mapPreview').innerHTML =sMap;
        }

        function doOut(obj) {
            reset();
        }

        function reset() {
            $(currentSelector).remove();
            currentSelector=null;
        }

        function doMove(obj)
        {
            endLeft = window.event.clientX,
                endTop = window.event.clientY;
            var oimg = document.getElementById("imgMap");
            //document.getElementById("coords").value=window.event.clientX + ', ' + window.event.clientY + ', ' + oimg.offsetTop + ', ' + oimg.offsetLeft;
            updateCoords();
            ResiseCurrentSelector(startTop,startLeft,endTop,endLeft);
        }
        //    function doAddSelector(top1,left1,top2,left2)
        //    {
        //
        //        var oSelector = document.createElement("div");
        //        var oImage = document.getElementById('imgMap');
        //
        //        currentSelector = document.body.appendChild(oSelector);
        //        oSelector.id="selector";
        //        oSelector.name="selector";
        //        currentSelector.style.top=top1+'px';
        //        currentSelector.style.left=left1+'px';
        //        currentSelector.style.width=(left2-left1)+'px';
        //        currentSelector.style.height=(top2-top1)+'px';
        //
        //        offsetTop=oImage.offsetTop;
        //        offsetLeft=oImage.offsetLeft;
        //    }

        function ResiseCurrentSelector(top1,left1,top2,left2) {
            if (currentSelector!=null) {
                currentSelector.style.width=(left2-left1)+'px';
                currentSelector.style.height=(top2-top1)+'px';
                currentSelector.innerText=(top1-offsetTop) + 'x' + (left1-offsetLeft) + '->' + (top2-offsetTop) + 'x' + (left2-offsetLeft) ;

            }
        }


        function doUpdate() {
            var file = $("#inputImage")[0].files[0];
            var fileName = file.name;
            var fileSize = file.size;
            var URL = window.URL || window.webkitURL;

            $("#imgMap")[0] .setAttribute('src',URL.createObjectURL(file));
            $("#imgMapShow")[0] .setAttribute('src',URL.createObjectURL(file));


            var reader = new FileReader();
            reader.onload = function(evt) {

            };

            reader.readAsDataURL(file);

        }


        jQuery(document).ready(function() {
            $("body").click(function() {
                //console.log("doEdit");
                doEdit();
            });
            $("#inputImage").change(function() {
                //console.log('doUpdate');
                doUpdate();
            });

            //onmousedown="doDown(this)"
            $("#imgMap").on("mousedown",function(event) {
                //console.log(this);
                //doDown(this,$(event)[0].clientX,$(event)[0].clientY);

//            var oPinLeft=event.pageX - target.offset().left;
//            var oPinTop=event.clientY - target.offset().top;

                doDown(this,event);

                //console.log($(event)[0].clientX);
                //console.log([event.pageY,$(event.srcElement)[0].offset().left,event.pageX,$(event.srcElement)[0].offset().top]);

            });

            var defaultItems = $(".page-breadcrumb.breadcrumb").children().splice(0,2);
            $(".page-breadcrumb.breadcrumb").empty().append(defaultItems);
            $(".page-breadcrumb.breadcrumb").append('<li><i class="fa fa-angle-right"></i><a href="#">Tools</a></li>')
            $(".page-breadcrumb.breadcrumb").append('<li><i class="fa fa-angle-right"></i><a href="#">Image Map</a></li>');


        });

        //https://css-tricks.com/snippets/jquery/draggable-without-jquery-ui/
        (function($) {
            $.fn.draggable = function(opt) {

                opt = $.extend({handle:"",cursor:"move"}, opt);

                if(opt.handle === "") {
                    var $el = this;
                } else {
                    var $el = this.find(opt.handle);
                }

                return $el.css('cursor', opt.cursor).on("mousedown", function (e) {
                    if (opt.handle === "") {
                        var $drag = $(this).addClass('draggable');
                    } else {
                        var $drag = $(this).addClass('active-handle').parent().addClass('draggable');
                    }
                    var z_idx = $drag.css('z-index'),
                        drg_h = $drag.outerHeight(),
                        drg_w = $drag.outerWidth(),
                        pos_y = $drag.offset().top + drg_h - e.pageY,
                        pos_x = $drag.offset().left + drg_w - e.pageX;
                    $drag.css('z-index', 1000).parents().on("mousemove", function (e) {
                        $('.draggable').offset({
                            top: e.pageY + pos_y - drg_h,
                            left: e.pageX + pos_x - drg_w
                        }).on("mouseup", function () {
                            $(this).removeClass('draggable').css('z-index', z_idx);
                        });
                    });
                    e.preventDefault(); // disable selection
                }).on("mouseup", function () {
                    if (opt.handle === "") {
                        $(this).removeClass('draggable');
                    } else {
                        $(this).removeClass('active-handle').parent().removeClass('draggable');
                    }
                });

            }
        })(jQuery);
    </script>
  </body>
</html>
